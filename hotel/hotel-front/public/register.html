<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>用户注册</title>
    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/layer/layer.js"></script>
</head>
<body>
    <h2>用户注册</h2>
    <form id="registerForm">
        <div>
            <label>用户名：</label>
            <input type="text" id="username" name="username" required />
        </div>
        <div>
            <label>密码：</label>
            <input type="password" id="password" name="password" required />
        </div>
        <div>
            <label>真实姓名：</label>
            <input type="text" id="realName" name="realName" required />
        </div>
        <div>
            <label>手机号：</label>
            <input type="text" id="phone" name="phone" required />
        </div>
        <button type="submit" id="registerBtn">注册</button>
    </form>
    <script>
        $(function() {
            $('#registerForm').on('submit', function(e) {
                e.preventDefault();
                var data = {
                    username: $('#username').val(),
                    password: $('#password').val(),
                    realName: $('#realName').val(),
                    phone: $('#phone').val()
                };
                $.ajax({
                    url: 'http://localhost:8081/member/register',
                    type: 'POST',
                    data: data,
                    success: function(res) {
                        if(res.success) {
                            layer.msg('注册成功', {icon: 1, time: 1500}, function(){
                                window.location.href = 'login.html';
                            });
                        } else {
                            layer.msg(res.message || '注册失败', {icon: 2});
                        }
                    },
                    error: function() {
                        layer.msg('请求失败', {icon: 2});
                    }
                });
            });
        });
    </script>
</body>
</html>
